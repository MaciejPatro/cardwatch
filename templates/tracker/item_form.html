{% extends "base.html" %}
{% block title %}Add/Edit Item{% endblock %}
{% block content %}
<form method="post" enctype="multipart/form-data">
    <div class="mb-3">
        <label class="form-label">Name</label>
        <input type="text" class="form-control" name="name" value="{{ item.name if item else '' }}" required>
    </div>
    <div class="mb-3">
        <label class="form-label">Buy Date</label>
        <input type="date" class="form-control" name="buy_date" value="{{ item.buy_date if item else '' }}" required>
    </div>
    <div class="mb-3">
        <label class="form-label">Link</label>
        <input type="url" class="form-control" name="link" value="{{ item.link if item else '' }}">
    </div>
    <div class="form-check mb-3">
        <input type="checkbox" class="form-check-input" name="graded" id="graded" {% if item and item.graded %}checked{% endif %}>
        <label class="form-check-label" for="graded">Graded</label>
    </div>
    <div class="mb-3">
        <label class="form-label">Price</label>
        <input type="number" step="0.01" class="form-control" name="price" value="{{ item.price if item else '' }}" required>
    </div>
    <div class="mb-3">
        <label class="form-label">Currency</label>
        <select name="currency" class="form-select">
            {% for code, label in currencies %}
                <option value="{{ code }}" {% if item and item.currency == code %}selected{% endif %}>{{ code }}</option>
            {% endfor %}
        </select>
    </div>
    <div class="mb-3">
        <label class="form-label">Sell Price</label>
        <input type="number" step="0.01" class="form-control" name="sell_price" value="{{ item.sell_price if item and item.sell_price is not none else '' }}">
    </div>
    <div class="mb-3">
        <label class="form-label">Sell Date</label>
        <input type="date" class="form-control" name="sell_date" value="{{ item.sell_date if item and item.sell_date else '' }}">
    </div>
    <div class="mb-3">
        <label class="form-label">Image</label>
        <input type="file" class="form-control" name="image">
        {% if item and item.image %}
            <img src="{{ url_for('tracker.media', filename=item.image) }}" alt="photo" style="max-width:70px; max-height:70px;">
        {% endif %}
    </div>
    <button class="btn btn-primary" type="submit">Save</button>
    <a href="{{ url_for('tracker.item_list') }}" class="btn btn-secondary">Back</a>
</form>
{% if item %}
<form action="{{ url_for('tracker.item_delete', item_id=item.id) }}" method="post" class="mt-2">
    <button class="btn btn-danger" type="submit">Delete</button>
</form>
{% endif %}
{% endblock %}
